<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>School Management System</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Authentication Section -->
    <div id="authSection" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1><i class="fas fa-graduation-cap" aria-hidden="true"></i> School</h1>
                <p>Management System</p>
            </div>

            <div id="authMessage" role="alert" aria-live="polite"></div>

            <!-- Login Form -->
            <form id="loginForm" novalidate>
                <fieldset class="role-selector" role="radiogroup" aria-labelledby="role-legend">
                    <legend id="role-legend" class="sr-only">Select your role</legend>
                    <div class="role-btn active" data-role="teacher" role="radio" aria-checked="true" tabindex="0">
                        <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i><br />Teacher
                    </div>
                    <div class="role-btn" data-role="admin" role="radio" aria-checked="false" tabindex="-1">
                        <i class="fas fa-user-shield" aria-hidden="true"></i><br />Admin
                    </div>
                </fieldset>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input
                        type="email"
                        id="email"
                        class="form-control"
                        required
                        placeholder="Enter your email"
                        aria-describedby="email-error"
                        autocomplete="email"
                    />
                    <div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input
                        type="password"
                        id="password"
                        class="form-control"
                        required
                        placeholder="Enter your password"
                        aria-describedby="password-error"
                        autocomplete="current-password"
                    />
                    <div id="password-error" class="error-message" role="alert" aria-live="polite"></div>
                </div>

                <button type="submit" class="btn" aria-describedby="login-status">
                    <span id="loginText">Sign In</span>
                    <span id="loginLoading" class="loading hidden" aria-hidden="true"></span>
                </button>
                <div id="login-status" class="sr-only" aria-live="polite"></div>
            </form>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboardSection" class="dashboard-container">
        <div class="dashboard">
            <header class="header">
                <div class="logo">
                    <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                    DPM School
                </div>
                <div class="search-container">
                    <label for="searchInput" class="sr-only">Search Student ID</label>
                    <input
                        type="text"
                        class="search"
                        placeholder="Search Student ID or Name"
                        id="searchInput"
                        aria-label="Search for student by ID or name"
                    />
                </div>
                <div class="user-info">
                    <time id="currentTime" aria-live="polite"></time>
                    <div class="profile" id="userProfile" role="button" aria-label="User profile menu" tabindex="0">
                        <span id="userInitials" aria-hidden="true">U</span>
                    </div>
                    <button
                        id="logoutBtn"
                        class="btn-secondary logout-btn"
                        aria-label="Sign out of application"
                    >
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i> Logout
                    </button>
                </div>
            </header>

            <div class="main-layout">
                <nav class="sidebar" role="navigation" aria-label="Main navigation">
                    <ul role="list">
                        <!-- Always Visible -->
                        <li><a href="#" class="nav-link active" data-section="dashboard" role="menuitem">
                            <i class="fas fa-tachometer-alt" aria-hidden="true"></i> Dashboard
                        </a></li>
                        
                        <!-- Teacher Management (Admin Only) -->
                        <li class="admin-only hidden"><a href="#" class="nav-link" data-section="teachers" role="menuitem">
                            <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i> Teachers
                        </a></li>
                        
                        <!-- Student Management (Admin & Teachers) -->
                        <li><a href="#" class="nav-link" data-section="students" role="menuitem">
                            <i class="fas fa-users" aria-hidden="true"></i> Students
                        </a></li>
                        
                        <!-- Attendance Management -->
                        <li><a href="#" class="nav-link" data-section="teachers-attendance" role="menuitem">
                            <i class="fas fa-user-check" aria-hidden="true"></i> Teacher Attendance
                        </a></li>
                        <li><a href="#" class="nav-link" data-section="students-attendance" role="menuitem">
                            <i class="fas fa-clipboard-check" aria-hidden="true"></i> Student Attendance
                        </a></li>
                        
                        <!-- Academic Management -->
                        <li><a href="#" class="nav-link" data-section="evaluations" role="menuitem">
                            <i class="fas fa-tasks" aria-hidden="true"></i> Evaluations
                        </a></li>
                        <li><a href="#" class="nav-link" data-section="reports" role="menuitem">
                            <i class="fas fa-chart-bar" aria-hidden="true"></i> Reports
                        </a></li>
                        
                        <!-- Settings -->
                        <li><a href="#" class="nav-link" data-section="settings" role="menuitem">
                            <i class="fas fa-cog" aria-hidden="true"></i> Settings
                        </a></li>
                    </ul>
                </nav>

                <main class="main-content" role="main">
                    <!-- 1. DASHBOARD SECTION -->
                    <div id="dashboardContent" class="content-section">
                        <div class="stats-grid" role="region" aria-label="School statistics">
                            <div class="stat-card">
                                <span class="stat-number" id="totalStudents" aria-label="Total students count">0</span>
                                <div class="stat-label">Total Students</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="totalTeachers" aria-label="Total teachers count">0</span>
                                <div class="stat-label">Total Teachers</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="presentToday" aria-label="Students present today count">0</span>
                                <div class="stat-label">Present Today</div>
                            </div>
                            <div class="stat-card">
                                <span class="stat-number" id="attendanceRate" aria-label="Overall attendance rate">0%</span>
                                <div class="stat-label">Attendance Rate</div>
                            </div>
                        </div>

                        <section class="card" aria-labelledby="attendance-overview-title">
                            <h2 id="attendance-overview-title"><i class="fas fa-chart-line" aria-hidden="true"></i> Attendance Overview</h2>
                            <p>Last 6 months</p>
                            <canvas id="attendanceChart" width="400" height="200" role="img" aria-label="Attendance chart for the last 6 months"></canvas>
                        </section>

                        <section class="card" aria-labelledby="calendar-title">
                            <h2 id="calendar-title"><i class="fas fa-calendar-alt" aria-hidden="true"></i> Calendar</h2>
                            <p id="currentMonthYear" aria-live="polite"></p>
                            <div id="calendar" role="grid" aria-label="School calendar"></div>
                        </section>

                        <section class="card" aria-labelledby="notice-title">
                            <h2 id="notice-title"><i class="fas fa-bullhorn" aria-hidden="true"></i> Notice Board</h2>
                            <div id="noticeBoard" role="list" aria-label="School notices">
                                <div class="notice-item" role="listitem">
                                    <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                                    Upcoming Examination - September 25, 2025
                                </div>
                                <div class="notice-item" role="listitem">
                                    <i class="fas fa-calendar-times" aria-hidden="true"></i>
                                    Holiday - September 30, 2025
                                </div>
                                <div class="notice-item" role="listitem">
                                    <i class="fas fa-basketball-ball" aria-hidden="true"></i>
                                    Basketball Match - September 25, 2025
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- 2. TEACHERS MANAGEMENT SECTION (Admin Only) -->
                    <div id="teachersContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="teachers-management-title">
                                <h2 id="teachers-management-title">
                                    <i class="fas fa-chalkboard-teacher" aria-hidden="true"></i> Teachers Management
                                </h2>
                                
                                <!-- Teachers Import -->
                                <div class="import-section" role="region" aria-labelledby="import-teachers-title">
                                    <h3 id="import-teachers-title">Import Teachers</h3>
                                    <div class="import-controls">
                                        <button class="btn btn-secondary" id="downloadTeachersTemplate">
                                            <i class="fas fa-download" aria-hidden="true"></i> Download Template
                                        </button>
                                        <label class="btn file-upload-btn">
                                            <i class="fas fa-upload" aria-hidden="true"></i> Import Teachers
                                            <input 
                                                type="file" 
                                                accept=".csv,.xlsx,.xls" 
                                                id="teachersFileInput" 
                                                class="file-input"
                                                aria-describedby="teachers-import-help"
                                            >
                                        </label>
                                    </div>
                                    <p class="import-help" id="teachers-import-help">
                                        <i class="fas fa-info-circle" aria-hidden="true"></i> 
                                        Upload CSV or Excel file with columns: first_name, last_name, email, employee_number, specialization, phone_number, is_head_teacher
                                    </p>
                                </div>

                                <!-- Add Teacher Form -->
                                <div class="form-section">
                                    <h3>Add New Teacher</h3>
                                    <form id="teacherForm" novalidate>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="teacher-first-name">First Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="teacher-first-name"
                                                    name="first_name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="100"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="teacher-last-name">Last Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="teacher-last-name"
                                                    name="last_name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="100"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="teacher-email">Email <span class="required">*</span></label>
                                                <input 
                                                    type="email" 
                                                    id="teacher-email"
                                                    name="email" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="255"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="teacher-employee-number">Employee Number <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="teacher-employee-number"
                                                    name="employee_number" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="20"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="teacher-specialization">Specialization</label>
                                                <input 
                                                    type="text" 
                                                    id="teacher-specialization"
                                                    name="specialization" 
                                                    class="form-control" 
                                                    maxlength="100"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="teacher-phone">Phone Number</label>
                                                <input 
                                                    type="tel" 
                                                    id="teacher-phone"
                                                    name="phone_number" 
                                                    class="form-control" 
                                                    maxlength="20"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <input type="checkbox" name="is_head_teacher" value="true">
                                                Head Teacher
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label for="teacher-password">Temporary Password</label>
                                            <input 
                                                type="password" 
                                                id="teacher-password"
                                                name="password" 
                                                class="form-control" 
                                                placeholder="Leave empty to auto-generate"
                                            />
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-user-plus" aria-hidden="true"></i> Add Teacher
                                        </button>
                                    </form>
                                </div>

                                <!-- Teachers List -->
                                <div class="teachers-list-section">
                                    <h3>Teachers List</h3>
                                    <div id="teachersList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- 3. STUDENTS MANAGEMENT SECTION -->
                    <div id="studentsContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="students-management-title">
                                <h2 id="students-management-title">
                                    <i class="fas fa-users" aria-hidden="true"></i> Students Management
                                </h2>
                                
                                <!-- Students Import -->
                                <div class="import-section" role="region" aria-labelledby="import-students-title">
                                    <h3 id="import-students-title">Import Students</h3>
                                    <div class="import-controls">
                                        <button class="btn btn-secondary" id="downloadStudentsTemplate">
                                            <i class="fas fa-download" aria-hidden="true"></i> Download Template
                                        </button>
                                        <label class="btn file-upload-btn">
                                            <i class="fas fa-upload" aria-hidden="true"></i> Import Students
                                            <input 
                                                type="file" 
                                                accept=".csv,.xlsx,.xls" 
                                                id="studentsFileInput" 
                                                class="file-input"
                                            >
                                        </label>
                                    </div>
                                    <p class="import-help">
                                        Upload CSV or Excel with columns: first_name, last_name, email, student_number, date_of_birth, phone_number, address, classroom_name, parent_name, parent_email, parent_phone
                                    </p>
                                </div>

                                <!-- Add Student Form -->
                                <div class="form-section">
                                    <h3>Add New Student</h3>
                                    <form id="studentForm" novalidate>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="student-first-name">First Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="student-first-name"
                                                    name="first_name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="100"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="student-last-name">Last Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="student-last-name"
                                                    name="last_name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="100"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="student-email">Email <span class="required">*</span></label>
                                                <input 
                                                    type="email" 
                                                    id="student-email"
                                                    name="email" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="255"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="student-number">Student Number <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="student-number"
                                                    name="student_number" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="20"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="student-classroom">Classroom</label>
                                                <select id="student-classroom" name="classroom_id" class="form-control">
                                                    <option value="">Select Classroom</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="student-birth-date">Date of Birth</label>
                                                <input 
                                                    type="date" 
                                                    id="student-birth-date"
                                                    name="date_of_birth" 
                                                    class="form-control"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="student-phone">Phone Number</label>
                                                <input 
                                                    type="tel" 
                                                    id="student-phone"
                                                    name="phone" 
                                                    class="form-control" 
                                                    maxlength="20"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="student-parent-name">Parent Name</label>
                                                <input 
                                                    type="text" 
                                                    id="student-parent-name"
                                                    name="parent_name" 
                                                    class="form-control" 
                                                    maxlength="200"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="student-parent-email">Parent Email</label>
                                                <input 
                                                    type="email" 
                                                    id="student-parent-email"
                                                    name="parent_email" 
                                                    class="form-control" 
                                                    maxlength="255"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="student-parent-phone">Parent Phone</label>
                                                <input 
                                                    type="tel" 
                                                    id="student-parent-phone"
                                                    name="parent_phone" 
                                                    class="form-control" 
                                                    maxlength="20"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="student-address">Address</label>
                                            <textarea 
                                                id="student-address"
                                                name="address" 
                                                class="form-control" 
                                                rows="2" 
                                                maxlength="500"
                                            ></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <input type="checkbox" name="is_enrolled" value="true" checked>
                                                Currently Enrolled
                                            </label>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-user-plus" aria-hidden="true"></i> Add Student
                                        </button>
                                    </form>
                                </div>

                                <!-- Students Filter and List -->
                                <div class="students-list-section">
                                    <h3>Students List</h3>
                                    <div class="form-group">
                                        <label for="studentsClassroomFilter">Filter by Classroom</label>
                                        <select id="studentsClassroomFilter" class="form-control">
                                            <option value="all">All Classrooms</option>
                                        </select>
                                    </div>
                                    <div id="studentsList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- 4. TEACHER ATTENDANCE SECTION -->
                    <div id="teachers-attendanceContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="teacher-attendance-title">
                                <h2 id="teacher-attendance-title">
                                    <i class="fas fa-user-check" aria-hidden="true"></i> Teacher Attendance
                                </h2>
                                
                                <!-- Record Teacher Attendance -->
                                <div class="form-section">
                                    <h3>Record Teacher Attendance</h3>
                                    <form id="teacherAttendanceForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="teacherAttendanceDate">Date</label>
                                                <input 
                                                    type="date" 
                                                    id="teacherAttendanceDate" 
                                                    class="form-control" 
                                                    required
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="teacherSelect">Teacher (Admin Only)</label>
                                                <select id="teacherSelect" class="form-control">
                                                    <option value="">Select Teacher</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button type="button" class="btn" id="loadTeachersAttendanceBtn">
                                            <i class="fas fa-users" aria-hidden="true"></i> Load Teachers
                                        </button>
                                    </form>
                                </div>

                                <!-- Teacher Attendance List -->
                                <div id="teacherAttendanceList" class="attendance-list" aria-live="polite"></div>
                            </section>
                        </div>
                    </div>

                    <!-- 5. STUDENT ATTENDANCE SECTION -->
                    <div id="students-attendanceContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="student-attendance-title">
                                <h2 id="student-attendance-title">
                                    <i class="fas fa-clipboard-check" aria-hidden="true"></i> Student Attendance
                                </h2>
                                
                                <!-- Record Student Attendance -->
                                <div class="form-section">
                                    <h3>Take Student Attendance</h3>
                                    <form id="studentAttendanceForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="studentAttendanceDate">Date</label>
                                                <input 
                                                    type="date" 
                                                    id="studentAttendanceDate" 
                                                    class="form-control" 
                                                    required
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="attendanceClassroom">Classroom</label>
                                                <select id="attendanceClassroom" class="form-control" required>
                                                    <option value="">Select Classroom</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button type="button" class="btn" id="loadStudentsForAttendanceBtn">
                                            <i class="fas fa-users" aria-hidden="true"></i> Load Students
                                        </button>
                                    </form>
                                </div>

                                <!-- Student Attendance List -->
                                <div id="studentAttendanceList" class="attendance-list" aria-live="polite"></div>
                            </section>
                        </div>
                    </div>

                    <!-- 6. EVALUATIONS SECTION -->
                    <div id="evaluationsContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="evaluations-title">
                                <h2 id="evaluations-title">
                                    <i class="fas fa-tasks" aria-hidden="true"></i> Evaluations & Grades
                                </h2>
                                
                                <!-- Create Evaluation -->
                                <div class="form-section">
                                    <h3>Create New Evaluation</h3>
                                    <form id="evaluationForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="evaluation-name">Evaluation Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="evaluation-name"
                                                    name="name" 
                                                    class="form-control" 
                                                    required 
                                                    placeholder="e.g., Math Quiz 1"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="evaluation-type">Type <span class="required">*</span></label>
                                                <select id="evaluation-type" name="type" class="form-control" required>
                                                    <option value="">Select Type</option>
                                                    <option value="quiz">Quiz</option>
                                                    <option value="test">Test</option>
                                                    <option value="assignment">Assignment</option>
                                                    <option value="project">Project</option>
                                                    <option value="exam">Exam</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="evaluation-subject">Subject <span class="required">*</span></label>
                                                <select id="evaluation-subject" name="subject_id" class="form-control" required>
                                                    <option value="">Select Subject</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="evaluation-classroom">Classroom <span class="required">*</span></label>
                                                <select id="evaluation-classroom" name="classroom_id" class="form-control" required>
                                                    <option value="">Select Classroom</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="evaluation-date">Evaluation Date</label>
                                                <input 
                                                    type="date" 
                                                    id="evaluation-date"
                                                    name="evaluation_date" 
                                                    class="form-control"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="evaluation-max-points">Max Points</label>
                                                <input 
                                                    type="number" 
                                                    id="evaluation-max-points"
                                                    name="max_points" 
                                                    class="form-control" 
                                                    min="1" 
                                                    step="0.01" 
                                                    value="20"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="evaluation-weight">Weight</label>
                                                <input 
                                                    type="number" 
                                                    id="evaluation-weight"
                                                    name="weight" 
                                                    class="form-control" 
                                                    min="0.1" 
                                                    step="0.1" 
                                                    value="1.0"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="evaluation-description">Description</label>
                                            <textarea 
                                                id="evaluation-description"
                                                name="description" 
                                                class="form-control" 
                                                rows="2"
                                            ></textarea>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-plus" aria-hidden="true"></i> Create Evaluation
                                        </button>
                                    </form>
                                </div>

                                <!-- Grade Entry -->
                                <div class="form-section">
                                    <h3>Enter Grades</h3>
                                    <form id="gradeEntryForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="grade-evaluation">Evaluation</label>
                                                <select id="grade-evaluation" name="evaluation_id" class="form-control" required>
                                                    <option value="">Select Evaluation</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="grade-student">Student</label>
                                                <select id="grade-student" name="student_id" class="form-control" required>
                                                    <option value="">Select Student</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="grade-points-earned">Points Earned</label>
                                                <input 
                                                    type="number" 
                                                    id="grade-points-earned"
                                                    name="points_earned" 
                                                    class="form-control" 
                                                    min="0" 
                                                    step="0.01" 
                                                    required
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="grade-points-possible">Points Possible</label>
                                                <input 
                                                    type="number" 
                                                    id="grade-points-possible"
                                                    name="points_possible" 
                                                    class="form-control" 
                                                    min="1" 
                                                    step="0.01" 
                                                    value="20" 
                                                    readonly
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="grade-comments">Comments</label>
                                            <textarea 
                                                id="grade-comments"
                                                name="comments" 
                                                class="form-control" 
                                                rows="2"
                                            ></textarea>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                <input type="checkbox" name="is_excused" value="true">
                                                Excused
                                            </label>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-save" aria-hidden="true"></i> Save Grade
                                        </button>
                                    </form>
                                </div>

                                <!-- Evaluations List -->
                                <div class="evaluations-list-section">
                                    <h3>Recent Evaluations</h3>
                                    <div class="form-group">
                                        <label for="evaluationsClassroomFilter">Filter by Classroom</label>
                                        <select id="evaluationsClassroomFilter" class="form-control">
                                            <option value="all">All Classrooms</option>
                                        </select>
                                    </div>
                                    <div id="evaluationsList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- 7. REPORTS SECTION -->
                    <div id="reportsContent" class="content-section hidden">
                        <div class="full-width">
                            <section class="card" aria-labelledby="reports-title">
                                <h2 id="reports-title">
                                    <i class="fas fa-chart-bar" aria-hidden="true"></i> Reports & Analytics
                                </h2>
                                
                                <!-- Generate Reports -->
                                <div class="form-section">
                                    <h3>Generate Reports</h3>
                                    <form id="reportsForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="reportType">Report Type</label>
                                                <select id="reportType" class="form-control" required>
                                                    <option value="">Select Report Type</option>
                                                    <option value="student_report">Student Report Card</option>
                                                    <option value="classroom_report">Classroom Report</option>
                                                    <option value="attendance_report">Attendance Report</option>
                                                    <option value="grade_analysis">Grade Analysis</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="reportClassroom">Classroom</label>
                                                <select id="reportClassroom" class="form-control">
                                                    <option value="all">All Classrooms</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="reportPeriod">Evaluation Period</label>
                                                <select id="reportPeriod" class="form-control">
                                                    <option value="">Select Period</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="reportStudent">Student (for individual report)</label>
                                                <select id="reportStudent" class="form-control">
                                                    <option value="">Select Student</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="reportDateFrom">From Date</label>
                                                <input type="date" id="reportDateFrom" class="form-control" />
                                            </div>
                                            <div class="form-group">
                                                <label for="reportDateTo">To Date</label>
                                                <input type="date" id="reportDateTo" class="form-control" />
                                            </div>
                                        </div>
                                        <button type="button" class="btn" id="generateReportsBtn">
                                            <i class="fas fa-file-pdf" aria-hidden="true"></i> Generate Reports
                                        </button>
                                    </form>
                                </div>

                                <!-- Reports List -->
                                <div class="reports-list-section">
                                    <h3>Generated Reports</h3>
                                    <div id="reportsList" class="reports-list" aria-live="polite">
                                        <!-- Reports will be populated here -->
                                    </div>
                                </div>

                                <!-- Analytics Dashboard -->
                                <div class="analytics-section">
                                    <h3>Analytics Overview</h3>
                                    <div class="analytics-grid">
                                        <div class="analytics-card">
                                            <h4>Grade Distribution</h4>
                                            <canvas id="gradeDistributionChart" width="300" height="200"></canvas>
                                        </div>
                                        <div class="analytics-card">
                                            <h4>Attendance Trends</h4>
                                            <canvas id="attendanceTrendsChart" width="300" height="200"></canvas>
                                        </div>
                                        <div class="analytics-card">
                                            <h4>Performance by Subject</h4>
                                            <canvas id="subjectPerformanceChart" width="300" height="200"></canvas>
                                        </div>
                                        <div class="analytics-card">
                                            <h4>Top Performers</h4>
                                            <div id="topPerformers" class="performance-list">
                                                <!-- Top performers list -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                    <!-- 8. SETTINGS SECTION -->
                    <div id="settingsContent" class="content-section hidden">
                        <div class="full-width">
                            <!-- System Settings -->
                            <section class="card" aria-labelledby="system-settings-title">
                                <h2 id="system-settings-title">
                                    <i class="fas fa-cog" aria-hidden="true"></i> System Settings
                                </h2>
                                
                                <!-- School Information -->
                                <div class="form-section">
                                    <h3>School Information</h3>
                                    <form id="schoolInfoForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="school-name">School Name</label>
                                                <input 
                                                    type="text" 
                                                    id="school-name"
                                                    name="school_name"
                                                    class="form-control" 
                                                    value="DPM School"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="academic-year">Academic Year</label>
                                                <input 
                                                    type="text" 
                                                    id="academic-year"
                                                    name="academic_year"
                                                    class="form-control" 
                                                    value="2024-2025"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="school-address">School Address</label>
                                            <textarea 
                                                id="school-address"
                                                name="address"
                                                class="form-control" 
                                                rows="3"
                                            >123 Education Street, City, Country</textarea>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-save" aria-hidden="true"></i> Save School Info
                                        </button>
                                    </form>
                                </div>
                            </section>

                            <!-- Classrooms Management (Admin only) -->
                            <section class="card admin-only" aria-labelledby="classrooms-settings-title">
                                <h2 id="classrooms-settings-title">
                                    <i class="fas fa-school" aria-hidden="true"></i> Classrooms Management
                                </h2>
                                
                                <!-- Import Classrooms -->
                                <div class="import-section">
                                    <h3>Import Classrooms</h3>
                                    <div class="import-controls">
                                        <button class="btn btn-secondary" id="downloadClassroomsTemplate">
                                            <i class="fas fa-download" aria-hidden="true"></i> Download Template
                                        </button>
                                        <label class="btn file-upload-btn">
                                            <i class="fas fa-upload" aria-hidden="true"></i> Import Classrooms
                                            <input 
                                                type="file" 
                                                accept=".csv,.xlsx,.xls" 
                                                id="classroomsFileInput" 
                                                class="file-input"
                                            >
                                        </label>
                                    </div>
                                    <p class="import-help">
                                        Upload CSV or Excel with columns: name, grade_level, description, capacity, head_teacher_email
                                    </p>
                                </div>

                                <!-- Add Classroom Form -->
                                <div class="form-section">
                                    <h3>Add New Classroom</h3>
                                    <form id="classroomForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="classroom-name">Classroom Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="classroom-name"
                                                    name="name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="50"
                                                    placeholder="e.g., Form 5A"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="classroom-grade">Grade Level <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="classroom-grade"
                                                    name="grade_level" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="50"
                                                    placeholder="e.g., 10"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="classroom-capacity">Capacity</label>
                                                <input 
                                                    type="number" 
                                                    id="classroom-capacity"
                                                    name="capacity" 
                                                    class="form-control" 
                                                    min="1" 
                                                    placeholder="30"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="classroom-head-teacher">Head Teacher Email</label>
                                                <input 
                                                    type="email" 
                                                    id="classroom-head-teacher"
                                                    name="head_teacher_email" 
                                                    class="form-control" 
                                                    placeholder="teacher@school.com"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="classroom-description">Description</label>
                                            <textarea 
                                                id="classroom-description"
                                                name="description" 
                                                class="form-control" 
                                                rows="2" 
                                                maxlength="500"
                                            ></textarea>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-plus" aria-hidden="true"></i> Add Classroom
                                        </button>
                                    </form>
                                </div>

                                <!-- Classrooms List -->
                                <div class="classrooms-list-section">
                                    <h3>Classrooms List</h3>
                                    <div id="classroomsList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>

                            <!-- Subjects Management (Admin only) -->
                            <section class="card admin-only" aria-labelledby="subjects-settings-title">
                                <h2 id="subjects-settings-title">
                                    <i class="fas fa-book" aria-hidden="true"></i> Subjects Management
                                </h2>
                                
                                <!-- Import Subjects -->
                                <div class="import-section">
                                    <h3>Import Subjects</h3>
                                    <div class="import-controls">
                                        <button class="btn btn-secondary" id="downloadSubjectsTemplate">
                                            <i class="fas fa-download" aria-hidden="true"></i> Download Template
                                        </button>
                                        <label class="btn file-upload-btn">
                                            <i class="fas fa-upload" aria-hidden="true"></i> Import Subjects
                                            <input 
                                                type="file" 
                                                accept=".csv,.xlsx,.xls" 
                                                id="subjectsFileInput" 
                                                class="file-input"
                                            >
                                        </label>
                                    </div>
                                    <p class="import-help">
                                        Upload CSV or Excel with columns: name, code, description, coefficient
                                    </p>
                                </div>

                                <!-- Add Subject Form -->
                                <div class="form-section">
                                    <h3>Add New Subject</h3>
                                    <form id="subjectForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="subject-name">Subject Name <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="subject-name"
                                                    name="name" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="100"
                                                    placeholder="e.g., Mathematics"
                                                />
                                            </div>
                                            <div class="form-group">
                                                <label for="subject-code">Subject Code <span class="required">*</span></label>
                                                <input 
                                                    type="text" 
                                                    id="subject-code"
                                                    name="code" 
                                                    class="form-control" 
                                                    required 
                                                    maxlength="20"
                                                    placeholder="e.g., MATH101"
                                                />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="subject-coefficient">Coefficient</label>
                                            <input 
                                                type="number" 
                                                id="subject-coefficient"
                                                name="coefficient" 
                                                class="form-control" 
                                                min="1" 
                                                step="1" 
                                                value="1"
                                            />
                                        </div>
                                        <div class="form-group">
                                            <label for="subject-description">Description</label>
                                            <textarea 
                                                id="subject-description"
                                                name="description" 
                                                class="form-control" 
                                                rows="2" 
                                                maxlength="500"
                                            ></textarea>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-plus" aria-hidden="true"></i> Add Subject
                                        </button>
                                    </form>
                                </div>

                                <!-- Subjects List -->
                                <div class="subjects-list-section">
                                    <h3>Subjects List</h3>
                                    <div id="subjectsList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>

                            <!-- Teacher Assignments (Admin only) -->
                            <section class="card admin-only" aria-labelledby="assignments-settings-title">
                                <h2 id="assignments-settings-title">
                                    <i class="fas fa-users-cog" aria-hidden="true"></i> Teacher Assignments
                                </h2>
                                
                                <!-- Create Assignment -->
                                <div class="form-section">
                                    <h3>Assign Teacher to Subject & Classroom</h3>
                                    <form id="assignmentForm">
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="assignment-teacher">Teacher <span class="required">*</span></label>
                                                <select id="assignment-teacher" name="teacher_id" class="form-control" required>
                                                    <option value="">Select Teacher</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="assignment-subject">Subject <span class="required">*</span></label>
                                                <select id="assignment-subject" name="subject_id" class="form-control" required>
                                                    <option value="">Select Subject</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="assignment-classroom">Classroom <span class="required">*</span></label>
                                                <select id="assignment-classroom" name="classroom_id" class="form-control" required>
                                                    <option value="">Select Classroom</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="assignment-academic-year">Academic Year</label>
                                                <input 
                                                    type="text" 
                                                    id="assignment-academic-year"
                                                    name="academic_year" 
                                                    class="form-control" 
                                                    value="2024-2025"
                                                />
                                            </div>
                                        </div>
                                        <button type="submit" class="btn">
                                            <i class="fas fa-plus" aria-hidden="true"></i> Create Assignment
                                        </button>
                                    </form>
                                </div>

                                <!-- Assignments List -->
                                <div class="assignments-list-section">
                                    <h3>Current Assignments</h3>
                                    <div id="assignmentsList" class="data-list" aria-live="polite"></div>
                                </div>
                            </section>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>